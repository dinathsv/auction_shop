{% extends "core/base.html" %}
{% block title %}Your cart | AuctionShop{% endblock %}

{% block content %}
<div class="cart-page">
  <div class="cart-card">
    <header class="cart-header">
      <h1>Your cart</h1>
      <p class="cart-subtitle">Review your items before checkout.</p>
    </header>

    {% if cart_items %}
      <div class="cart-table-wrapper">
        <table class="cart-table">
          <thead>
            <tr>
              <th>Product</th>
              <th class="col-center">Qty</th>
              <th class="col-right">Price (Rs.)</th>
              <th class="col-right">Subtotal (Rs.)</th>
            </tr>
          </thead>
          <tbody>
            {% for item in cart_items %}
              <tr>
                <td>
                  <div class="cart-product">
                    {% if item.product.image %}
                      <img
                        src="{{ item.product.image.url }}"
                        alt="{{ item.product.title }}"
                        class="cart-thumb"
                      >
                    {% endif %}
                    <div>
                      <div class="cart-product-title">
                        {{ item.product.title }}
                      </div>
                      {% if item.product.listing_type == "BID" %}
                        <div class="cart-product-tag">Auction item</div>
                      {% endif %}
                    </div>
                  </div>
                </td>
                <td class="col-center">
                  {{ item.quantity }}
                </td>
                <td class="col-right">
                  {{ item.price }}
                </td>
                <td class="col-right">
                  {{ item.subtotal }}
                </td>
              </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <div class="cart-summary">
        <div class="cart-total-row">
          <span>Total:</span>
          <span class="cart-total-amount">Rs. {{ cart_total|default:"0.00" }}</span>
        </div>

        <div class="cart-actions">
          <!-- Continue shopping -->
          <a href="/auctions/" class="btn btn-ghost">
            ‚Üê Continue shopping
          </a>

          <!-- Checkout button -->
          <a href="#" class="btn btn-primary">
            Checkout
          </a>
        </div>
      </div>

    {% else %}
      <div class="cart-empty-wrapper">
        <p class="cart-empty-text">üõí Your cart is currently empty.</p>

        <a href="/auctions/" class="btn btn-primary">
          Browse Products
        </a>
      </div>
    {% endif %}
  </div>
</div>
{% endblock %}
